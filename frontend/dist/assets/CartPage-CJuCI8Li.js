import{c as v,j as e,u as y,a as j,B as d,T as r,b as C,r as b,d as m,e as D,g as F,R as P,D as p,G as h,P as k,f as W,A as S}from"./index-Bg7Lztdd.js";import{L as A,S as B,a as R}from"./Stack-CyiE0ODI.js";import{I as u,A as q,D as w}from"./Delete-CDeJBXRt.js";import{C as g}from"./Container-DVBPvZB6.js";import{L as z}from"./List-DQDaG03M.js";import"./isHostComponent-CIBwoAig.js";import"./listItemButtonClasses-Wh8hGUTv.js";const L=v(e.jsx("path",{d:"M19 13H5v-2h14z"}),"Remove"),T=({item:s})=>{const t=y(),{loading:n}=j(c=>c.cart),{name:i,price:l,discount:x}=s==null?void 0:s.productId,{_id:o}=s,a=c=>{(c==="increase"||c==="decrease"&&(s==null?void 0:s.quantity)>1)&&t(C({_id:o,action:c}))},f=()=>{t(b(o))};return e.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:2,py:2},children:[e.jsxs(d,{sx:{flexGrow:1},children:[e.jsx(r,{variant:"h6",fontWeight:"bold",children:i}),e.jsxs(d,{display:"flex",gap:1,alignItems:"center",children:[e.jsxs(r,{variant:"body2",sx:{color:"error.main",textDecoration:"line-through"},children:["₹",(l*(s==null?void 0:s.quantity)).toFixed(2)]}),e.jsxs(r,{variant:"body1",sx:{color:"green",fontWeight:"bold"},children:["Final Price ₹",((l-x)*(s==null?void 0:s.quantity)).toFixed(2)]})]})]}),e.jsxs(B,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(u,{onClick:()=>a("decrease"),size:"small",disabled:n||(s==null?void 0:s.quantity)<=1,children:e.jsx(L,{})}),e.jsx(r,{variant:"body1",fontWeight:"bold",children:s==null?void 0:s.quantity}),e.jsx(u,{onClick:()=>a("increase"),size:"small",disabled:n,children:e.jsx(q,{})})]}),e.jsx(R,{children:e.jsx(u,{onClick:f,size:"small",disabled:n,color:"error",children:e.jsx(w,{})})})]})};function M(){var x,o;const s=m(),t=y(),{cartItems:n}=j(a=>a.cart),{user:i}=j(a=>a.auth);D.useEffect(()=>{i&&t(F())},[t,i]);const l=()=>{i?(t(S(n==null?void 0:n.items)),s("/checkout")):s("/user/signin")};return(x=n==null?void 0:n.items)!=null&&x.length?e.jsxs(g,{maxWidth:"md",children:[e.jsx(r,{variant:"h4",component:"h1",gutterBottom:!0,sx:{my:4},children:"Shopping Cart"}),e.jsx(z,{children:(o=n==null?void 0:n.items)==null?void 0:o.map(a=>e.jsxs(P.Fragment,{children:[e.jsx(T,{item:a}),e.jsx(p,{})]},a._id))}),e.jsxs(h,{container:!0,spacing:3,sx:{mt:4},children:[e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(k,{elevation:3,sx:{p:3},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Order Summary"}),e.jsxs(d,{display:"flex",justifyContent:"space-between",children:[e.jsx(r,{variant:"body1",children:"Total Price:"}),e.jsxs(r,{variant:"body1",sx:{textDecoration:"line-through",color:"text.secondary"},children:["₹",((n==null?void 0:n.totalPrice)??0).toFixed(2)]})]}),e.jsxs(d,{display:"flex",justifyContent:"space-between",mt:1,children:[e.jsx(r,{variant:"body1",children:"Discount:"}),e.jsxs(r,{variant:"body1",color:"error",children:["- ₹",((n==null?void 0:n.discount)??0).toFixed(2)]})]}),e.jsx(p,{sx:{my:2}}),e.jsxs(d,{display:"flex",justifyContent:"space-between",children:[e.jsx(r,{variant:"h6",fontWeight:"bold",children:"Final Price:"}),e.jsxs(r,{variant:"h6",fontWeight:"bold",children:["₹",((n==null?void 0:n.finalPrice)??0).toFixed(2)]})]})]})}),e.jsx(h,{item:!0,xs:12,md:6,display:"flex",alignItems:"center",children:e.jsx(W,{variant:"contained",color:"primary",fullWidth:!0,size:"large",onClick:l,children:"Proceed to Checkout"})})]})]}):e.jsx(g,{maxWidth:"md",sx:{textAlign:"center",mt:4},children:e.jsx(r,{variant:"h6",children:"Your cart is empty."})})}export{M as default};
