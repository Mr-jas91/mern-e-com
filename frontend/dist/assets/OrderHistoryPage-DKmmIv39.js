import{u as h,d as l,j as a,O as d,B as x,Q as u,T as e,W as p,X as r,a as m,e as y,Y as f,Z as g}from"./index-Bg7Lztdd.js";import{C as j}from"./CardMedia-DyDp5sqH.js";import{C as v}from"./Container-DVBPvZB6.js";const C=({orderDate:i,orderDetails:n})=>{const t=n==null?void 0:n.productId,s=h(),c=l(),o=()=>{s(r(n==null?void 0:n._id)),c(`/order/${n==null?void 0:n._id}/details`)};return a.jsxs(d,{sx:{display:"flex",mb:2,cursor:"pointer",borderRadius:2,boxShadow:2,"&:hover":{boxShadow:6,transform:"scale(1.02)",transition:"transform 0.2s"}},onClick:o,children:[a.jsx(j,{component:"img",sx:{width:120,height:120,objectFit:"cover",borderRadius:"4px 0 0 4px"},image:t==null?void 0:t.images[0],alt:t==null?void 0:t.name}),a.jsxs(x,{sx:{display:"flex",flexDirection:"column",flexGrow:1,p:2},children:[a.jsxs(u,{sx:{flex:"1 0 auto",padding:0},children:[a.jsx(e,{component:"div",variant:"h6",sx:{fontWeight:"bold"},children:t==null?void 0:t.name}),a.jsxs(e,{variant:"subtitle1",color:"text.secondary",component:"div",sx:{textDecoration:(t==null?void 0:t.discount)>0?"line-through":"none",fontSize:"1rem"},children:["$",t==null?void 0:t.price.toFixed(2)]}),(t==null?void 0:t.discount)>0&&a.jsxs(e,{variant:"h6",sx:{color:"green",fontWeight:"bold",fontSize:"1.2rem"},children:["$",((t==null?void 0:t.price)-t.discount).toFixed(2)]}),a.jsxs(e,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:["Ordered on: ",new Date(i).toLocaleDateString()]})]}),a.jsx(x,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:"auto"},children:a.jsx(p,{label:n==null?void 0:n.deliveryStatus,color:n.deliveryStatus==="DELIVERED"?"success":n.deliveryStatus==="SHIPPED"?"primary":n.deliveryStatus==="PENDING"?"warning":"default",size:"small",variant:"outlined"})})]})]})},E=()=>{const i=h(),{myorders:n,loading:t}=m(s=>s.orders);return y.useEffect(()=>{i(f())},[i]),t?a.jsx(g,{}):a.jsxs(v,{maxWidth:"md",children:[a.jsx(e,{variant:"h4",component:"h1",gutterBottom:!0,sx:{my:4},children:"Order History"}),Array.isArray(n)&&n.length>0?n.map(s=>Array.isArray(s==null?void 0:s.orderItems)&&(s==null?void 0:s.orderItems.map(c=>{var o;return a.jsx(C,{orderDate:s==null?void 0:s.createdAt,orderDetails:c},(c==null?void 0:c._id)||((o=c==null?void 0:c.productId)==null?void 0:o._id))}))):a.jsx(x,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:a.jsx(e,{variant:"h6",color:"text.secondary",children:"You haven't placed any orders yet."})})]})};export{E as default};
